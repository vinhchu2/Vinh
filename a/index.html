<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Ph√°t video c√≥ ph·ª• ƒë·ªÅ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      text-align: center;
      padding: 40px;
    }
    video {
      width: 80%;
      max-width: 960px;
      border: 2px solid #ccc;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      margin-top: 20px;
    }
    h1 {
      margin-bottom: 20px;
    }
    input {
      margin: 10px;
    }
    ::cue {
      font-size: 16px;
      color: #000; 
      background: rgba(255, 255, 255, 0.7);
    }
  </style>
</head>
<body>
  <h1>üé¨ Ph√°t video k√®m ph·ª• ƒë·ªÅ</h1>

  <input type="file" id="videoInput" accept="video/*">
  <input type="file" id="subtitleInput" accept=".vtt">

  <video id="videoPlayer" controls>
    <!-- Ph·ª• ƒë·ªÅ s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông b·∫±ng JavaScript -->
  </video>

  <script>
    const videoInput = document.getElementById('videoInput');
    const subtitleInput = document.getElementById('subtitleInput');
    const videoPlayer = document.getElementById('videoPlayer');

    let videoUrl = null;
    let subtitleUrl = null;

    // X·ª≠ l√Ω khi ng∆∞·ªùi d√πng ch·ªçn video
    videoInput.addEventListener('change', function () {
      const file = this.files[0];
      if (file && videoUrl) {
        URL.revokeObjectURL(videoUrl); // D·ªçn d·∫πp b·ªô nh·ªõ
      }
      if (file) {
        videoUrl = URL.createObjectURL(file);
        loadVideoAndSubtitle();
      }
    });

    // X·ª≠ l√Ω khi ng∆∞·ªùi d√πng ch·ªçn ph·ª• ƒë·ªÅ
    subtitleInput.addEventListener('change', function () {
      const file = this.files[0];
      if (file && subtitleUrl) {
        URL.revokeObjectURL(subtitleUrl);
      }
      if (file) {
        subtitleUrl = URL.createObjectURL(file);
        loadVideoAndSubtitle();
      }
    });

    function loadVideoAndSubtitle() {
      if (!videoUrl) return;

      // C·∫≠p nh·∫≠t video source
      videoPlayer.innerHTML = ''; // X√≥a track c≈© n·∫øu c√≥
      const source = document.createElement('source');
      source.src = videoUrl;
      source.type = 'video/mp4';
      videoPlayer.appendChild(source);

      // N·∫øu c√≥ ph·ª• ƒë·ªÅ th√¨ th√™m track
      if (subtitleUrl) {
        const track = document.createElement('track');
        track.src = subtitleUrl;
        track.kind = 'subtitles';
        track.srclang = 'vi';
        track.label = 'Ti·∫øng Vi·ªát';
        track.default = true;
        videoPlayer.appendChild(track);
      }

      videoPlayer.load(); // T·∫£i l·∫°i video v·ªõi ph·ª• ƒë·ªÅ m·ªõi
    }
  </script>
</body>
</html>